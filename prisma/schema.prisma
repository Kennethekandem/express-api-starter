generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model feeds {
  id          Int           @id @default(autoincrement())
  name        String?       @db.VarChar(100)
  updatedAt   DateTime      @updatedAt
  createdAt   DateTime      @default(now())
  userId      Int
  cost        Int
  user        users         @relation(fields: [userId], references: [id])
  ingredients ingredients[]

  @@index([userId], name: "userId")
}

model ingredients {
  id        Int       @id @default(autoincrement())
  quantity  Int
  updatedAt DateTime?    @updatedAt
  createdAt DateTime  @default(now())
  feedId    Int
  feeds     feeds     @relation(fields: [feedId], references: [id])

  @@index([feedId], name: "feedId")
}

model ponds {
  id        Int       @id @default(autoincrement())
  name      String?   @db.VarChar(100)
  number    Int?
  length    Int?
  width     Int?
  depth     Int?
  description   String
  volume    Int?
  updatedAt DateTime?    @updatedAt
  createdAt DateTime  @default(now())
  userId    Int
  user      users     @relation(fields: [userId], references: [id])
  stocks    stocks[]

  @@index([userId], name: "userId")
}

model stocks {
  id                  Int       @id @default(autoincrement())
  weight Int?
  price    Int?
  quantity Int?
  stocking_date       String?   @db.VarChar(100)
  stocking_month      String?   @db.VarChar(100)
  updatedAt           DateTime?  @updatedAt
  createdAt           DateTime  @default(now())
  pondId              Int
  pond                ponds     @relation(fields: [pondId], references: [id])
  userId              Int
  user                users     @relation(fields: [userId], references: [id])
  reports    reports[]

  @@index([pondId], name: "pondId")
}

model transactions {
  id          Int       @id @default(autoincrement())
  type        Int?
  description String?   @db.VarChar(100)
  source      String?   @db.VarChar(10)
  updatedAt   DateTime?  @updatedAt
  createdAt   DateTime  @default(now())
  userId      Int
  user        users     @relation(fields: [userId], references: [id])

  @@index([userId], name: "userId")
}

model users {
  id                 Int            @id @default(autoincrement())
  name               String?        @db.VarChar(100)
  email              String?        @db.VarChar(100)
  gender             String?        @db.VarChar(10)
  phone              String?        @db.VarChar(20)
  cityId            Int?
  farm               Boolean        @default(false)
  wallet             Int            @default(0)
  password           String?        @db.VarChar(100)
  verification_token String?        @db.VarChar(100)
  updatedAt          DateTime?       @updatedAt
  createdAt          DateTime       @default(now())
  feeds              feeds[]
  ponds              ponds[]
  farms              farms[]
  stocks             stocks[]
  transactions       transactions[]
}

model cities {
  id       Int     @id @default(autoincrement())
  stateId Int
  state      states     @relation(fields: [stateId], references: [id])
  name     String? @db.VarChar(100)
  farms              farms[]
}

model farms {
  id        Int       @id @default(autoincrement()) @db.UnsignedInt
  name      String?   @db.VarChar(200)
  cityId   Int
  city      cities     @relation(fields: [cityId], references: [id])
  location  String?   @db.VarChar(200)
  userId    Int
  user      users     @relation(fields: [userId], references: [id])
  updatedAt DateTime?    @updatedAt
  createdAt DateTime  @default(now())
}

model reports {
  id                   Int      @id @default(autoincrement()) @db.UnsignedInt
  stockId             Int
  stock      stocks     @relation(fields: [stockId], references: [id])
  day                  Int?
  present_quantity     Decimal? @db.Decimal(11, 0)
  dailly_mortality     Decimal? @db.Decimal(11, 0)
  cumulative_mortality Decimal? @db.Decimal(11, 0)
  average_weight       Decimal? @db.Decimal(10, 0)
  total_weight         Decimal? @db.Decimal(10, 0)
  feed_gift            Decimal? @db.Decimal(10, 0)
  cumulative_feed_gift Decimal? @db.Decimal(10, 0)
  cumulative_feed_cost Decimal? @db.Decimal(10, 0)
  total_weight_gain    Decimal? @db.Decimal(10, 0)
  updatedAt   DateTime?  @updatedAt
  createdAt   DateTime  @default(now())
}

model states {
  id   Int     @id @default(autoincrement())
  name String? @db.VarChar(100)
  cities              cities[]
}
